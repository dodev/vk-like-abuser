webpackJsonp([1,2],{100:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"wrapper"},[a("ui-tabs",{attrs:{raised:""}},[a("ui-tab",{attrs:{title:"Now"}},[t.global_stats?a("div",[a("stats")],1):t._e()]),t._v(" "),a("ui-tab",{attrs:{title:"Users"}},[a("users")],1),t._v(" "),a("ui-tab",{attrs:{title:"Tasks"}},[a("tasks")],1)],1)],1)},staticRenderFns:[]}},101:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"stats__actions"},[a("ui-button",{on:{click:function(s){t.loadData()}}},[t._v("Load data")]),t._v(" "),a("ui-button",{attrs:{loading:t.recountingLikes.loading,type:"primary"},on:{click:function(s){t.recountLikes()}}},[t._v("recount likes")]),t._v(" "),a("ui-button",{attrs:{loading:t.recountingUsers.loading},on:{click:function(s){t.recountUsers()}}},[t._v("\n    recount users")])],1)},staticRenderFns:[]}},104:function(t,s,a){"use strict";function e(t){var s=[];for(var a in t)s.push(t[a]);return s}Object.defineProperty(s,"__esModule",{value:!0});var i=a(6),n=a.n(i),r=a(21),o=a.n(r),l=a(37),c=a.n(l),u=a(36),_=a.n(u),v=a(34),d=a(35),f=(a.n(d),a(20)),k=a(38),m=a.n(k),b=a(39),g=a.n(b),h=a(7);a.d(s,"store",function(){return p}),o.a.use(h.a),o.a.use(m.a),o.a.use(g.a),o.a.use(_.a);var p=new h.a.Store({state:{count:0,users:[],globalStats:{},todayStats:{}},mutations:n()({},g.a.mutations,{increment:function(t){t.count++},loadUsers:function(t,s){t.users=s}}),getters:{globalStats:function(t){return t.globalStats},todayStats:function(t){return t.todayStats}},actions:{loadUsers:function(t){var s=t.commit;f.a.ref("users").orderByChild("createdAt").once("value",function(t){var a=e(t.val());f.a.ref("statistics").once("value",function(t){var e=t.val();a.map(function(t){e[t.id]&&(t.you_liked=e[t.id].you_liked,t.liked_you=e[t.id].liked_you)}),s("loadUsers",a)})})}}});p.dispatch("loadUsers"),new o.a({el:"#app",router:v.a,store:p,template:"<App/>",components:{App:c.a}})},20:function(t,s,a){"use strict";var e=a(33),i=a.n(e),n=a(90);a.n(n);a.d(s,"a",function(){return c}),console.warn(i.a);var r={apiKey:"AIzaSyB1IjoxSLvx-C_hpyQ2irgzB01Tf3bts3I",authDomain:"vk-free-likes.firebaseapp.com",databaseURL:"https://vk-free-likes.firebaseio.com",storageBucket:"vk-free-likes.appspot.com",messagingSenderId:"19336089245"},o={},l={};i.a&&(o=i.a.initializeApp(r),l=i.a.database());var c=l},34:function(t,s,a){"use strict";var e=a(21),i=a.n(e),n=a(102),r=a.n(n),o=a(91),l=a.n(o);i.a.use(r.a),s.a=new r.a({routes:[{path:"/",name:"Hello",component:l.a}]})},35:function(t,s){},37:function(t,s,a){a(84);var e=a(2)(a(41),a(96),null,null);t.exports=e.exports},40:function(t,s,a){"use strict";var e=a(50),i=a.n(e),n=a(51),r=a.n(n),o=function(){function t(){i()(this,t)}return r()(t,[{key:"getCurrentTime",value:function(){var t=new Date;return{year:t.getFullYear(),day:t.getDay(),month:t.getMonth()+1,date:t.getDate(),minutes:t.getMinutes(),seconds:t.getSeconds(),hours:t.getHours(),milliseconds:t.getMilliseconds()}}},{key:"formatValue",value:function(t){return t<10&&(t="0"+t),t}},{key:"getFormattedTime",value:function(){var t=this.getCurrentTime(),s=t.hours;s<10&&(s="0"+s);var a=t.minutes;return a<10&&(a="0"+a),s+":"+a}},{key:"getDateForFirebase",value:function(){var t=this.getCurrentTime(),s=t.year,a=t.month,e=t.date;return s+"/"+this.formatValue(a)+"/"+this.formatValue(e)}},{key:"getDateForLogs",value:function(){var t=this.getCurrentTime(),s=t.year,a=t.month,e=t.date;return s+"-"+this.formatValue(a)+"-"+this.formatValue(e)}}]),t}();s.a=o},41:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={name:"app"}},42:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a(6),i=a.n(e),n=a(47),r=a.n(n),o=a(93),l=a.n(o),c=a(95),u=a.n(c),_=a(94),v=a.n(_),d=a(7);s.default={name:"hello",mounted:function(){},data:function(){return{sortedUsers:[],global_stats:{users:{total:0,active:0,inactive:0}}}},methods:{getStats:function(t){var s=0,a=0;if(!t)return{you_liked:s,liked_you:a};if(this.stats&&this.stats.length>0&&this.users&&this.users.length>0){var e=0,i=!0,n=!1,o=void 0;try{for(var l,c=r()(this.stats);!(i=(l=c.next()).done);i=!0){var u=l.value;if(u[".key"]===t){s=this.stats[e].you_liked,a=this.stats[e].liked_you,this.users[t].you_liked=s,this.users[t].liked_you=a;break}e++}}catch(t){n=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(n)throw o}}}return{you_liked:s,liked_you:a}},removeUser:function(t){console.log(this.$firebaseRefs.users)}},computed:i()({},a.i(d.b)({users:function(t){return t.users}}),{isActive:function(){if(this.users&&this.users.length){var t=0;return this.users.forEach(function(s){s.isActive===!0&&t++}),t}return"loading..."},isNotActive:function(){return this.users&&this.users.length?this.users.length-this.isActive:"loading..."}}),components:{stats:l.a,users:u.a,tasks:v.a}}},43:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={name:"recounters",data:function(){return{recountingLikes:{loading:!1},recountingUsers:{loading:!1}}},methods:{recountLikes:function(){var t=this;this.recountingLikes.loading=!0,setTimeout(function(){t.recountingLikes.loading=!1},3e3)},recountUsers:function(){var t=this;this.recountingUsers.loading=!0,setTimeout(function(){t.recountingUsers.loading=!1},1e3)}}}},44:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a(6),i=a.n(e),n=a(92),r=a.n(n),o=a(7),l=a(20),c=a(40),u=new c.a,_="/daily_statistics/"+u.getDateForFirebase();s.default={name:"stats",computed:i()({},a.i(o.c)(["globalStats","todayStats"]),{successLikes:function(){return 100*(this.globalStats.likes.all/(this.globalStats.errors.all+this.globalStats.likes.all)).toFixed(2)},errorLikes:function(){return 100*(this.globalStats.errors.all/(this.globalStats.errors.all+this.globalStats.likes.all)).toFixed(2)},activeUsers:function(){return 100*(this.globalStats.users.active/this.globalStats.users.total).toFixed(2)},todayAllTasks:function(){return this.todayStats&&this.todayStats.tasks?this.todayStats.tasks.all:0},todayTasks:function(){return this.todayStats&&this.todayStats.tasks?this.todayStats.tasks:{all:0,success:0}}}),firebase:{globalStats:{source:l.a.ref("/global_stats"),asObject:!0},todayStats:{source:l.a.ref(_),asObject:!0}},components:{recounters:r.a}}},45:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={name:"tasks",data:function(){return{task:{user_id:"123",target_id:"123",item_id:"sadasd"}}},methods:{setTask:function(t){console.log(this.data),console.log(t)}}}},46:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a(6),i=a.n(e),n=a(7);s.default={name:"users",data:function(){return{queryUsername:"",searchByUsername:""}},computed:i()({},a.i(n.b)({users:function(t){return t.users}}),{filteredUsers:function(){var t=this;return this.users.filter(function(s){return!(!s||!s.username)&&s.username.toLowerCase().indexOf(t.queryUsername.toLowerCase())>-1})}})}},84:function(t,s){},85:function(t,s){},86:function(t,s){},87:function(t,s){},88:function(t,s){},89:function(t,s){},91:function(t,s,a){a(88);var e=a(2)(a(42),a(100),"data-v-c422bbdc",null);t.exports=e.exports},92:function(t,s,a){a(89);var e=a(2)(a(43),a(101),"data-v-e800c7cc",null);t.exports=e.exports},93:function(t,s,a){a(85);var e=a(2)(a(44),a(97),"data-v-49e8c142",null);t.exports=e.exports},94:function(t,s,a){a(86);var e=a(2)(a(45),a(98),"data-v-626e46ce",null);t.exports=e.exports},95:function(t,s,a){a(87);var e=a(2)(a(46),a(99),"data-v-6be28c48",null);t.exports=e.exports},96:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]}},97:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"stats"},[t.globalStats.users?a("div",{staticClass:"container"},[a("div",{staticClass:"stats__container"},[a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[a("ui-icon",{staticClass:"stats__icon",attrs:{icon:"perm_identity"}}),t._v("\n          All users \n        ")],1),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.globalStats.users.total)+"\n        ")])]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("Active users ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v(t._s(t.globalStats.users.active))])]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("Inactive users ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.globalStats.users.inactive)+"\n        ")])])]),t._v(" "),a("div",{staticClass:"stats__container"},[a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[a("ui-icon",{staticClass:"stats__icon",attrs:{icon:"favorite"}}),t._v("\n          Likes count\n        ")],1),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.globalStats.likes.all)+"\n        ")])]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("\n          Like errors\n        ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.globalStats.errors.all)+"\n        ")])])]),t._v(" "),a("div",{staticClass:"stats__container"},[a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[a("ui-icon",{staticClass:"stats__icon",attrs:{icon:"free_breakfast"}}),t._v("\n          today\n        ")],1)]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("\n          new sign ups\n        ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.todayStats.users||0)+"\n        ")])]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("\n          new likes\n        ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.todayStats.likes)+"\n        ")])]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("\n          errors\n        ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.todayStats.errors)+"\n        ")])]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("\n          tasks set\n        ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.todayTasks.all)+"\n        ")])]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("\n          tasks completed\n        ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.todayTasks.success)+"\n        ")])])]),t._v(" "),a("div",{staticClass:"stats__container"},[a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[a("ui-icon",{staticClass:"stats__icon",attrs:{icon:"show_chart"}}),t._v("\n          percents\n        ")],1)]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("\n          success likes\n        ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.successLikes)+"%\n        ")])]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("\n          error likes\n        ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.errorLikes)+"%\n        ")])]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("\n          active users\n        ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.activeUsers)+"%\n        ")])])]),t._v(" "),a("div",{staticClass:"stats__container"},[a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[a("ui-icon",{staticClass:"stats__icon",attrs:{icon:"extension"}}),t._v("\n          Tasks \n        ")],1),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.globalStats.tasks.all)+"\n        ")])]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("\n          completed tasks\n        ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.globalStats.tasks.success)+"\n        ")])]),t._v(" "),a("div",{staticClass:"stats__block"},[a("div",{staticClass:"stats__value_desc"},[t._v("\n          waiting tasks\n        ")]),t._v(" "),a("div",{staticClass:"stats__value"},[t._v("\n          "+t._s(t.globalStats.tasks.all-t.globalStats.tasks.success)+"\n        ")])])])]):a("div",[a("ui-progress-circular",{attrs:{color:"multi-color",size:54}})],1)])},staticRenderFns:[]}},98:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"box"},[a("div",{staticClass:"box__title"},[t._v("Create new task")]),t._v(" "),a("ui-textbox",{directives:[{name:"model",rawName:"v-model",value:t.task.user_id,expression:"task.user_id"}],attrs:{label:"User id"},domProps:{value:t.task.user_id},on:{input:function(s){t.task.user_id=s}}}),t._v(" "),a("ui-textbox",{directives:[{name:"model",rawName:"v-model",value:t.task.target_id,expression:"task.target_id"}],attrs:{label:"Target id"},domProps:{value:t.task.target_id},on:{input:function(s){t.task.target_id=s}}}),t._v(" "),a("ui-textbox",{directives:[{name:"model",rawName:"v-model",value:t.task.item_id,expression:"task.item_id"}],attrs:{label:"Item id"},domProps:{value:t.task.item_id},on:{input:function(s){t.task.item_id=s}}}),t._v(" "),a("ui-button",{on:{click:function(s){t.setTask(t.task)}}},[t._v("\n    Set task\n  ")])],1)},staticRenderFns:[]}},99:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("ui-textbox",{directives:[{name:"model",rawName:"v-model",value:t.queryUsername,expression:"queryUsername"}],attrs:{icon:"search",placeholder:"Начните вводить имя"},domProps:{value:t.queryUsername},on:{input:function(s){t.queryUsername=s}}}),t._v(" "),a("div",{staticClass:"users"},t._l(t.filteredUsers,function(s){return a("div",{ref:"user",refInFor:!0,staticClass:"user"},[a("div",{staticClass:"user__avatar"},[a("a",{attrs:{target:"_blank",href:"http://vk.com/id"+s.id}},[a("div",{staticClass:"avatar__status",class:{"avatar--isNotActive":s.isActive===!1,"avatar--isActive":s.isActive===!0}}),t._v(" "),a("img",{staticClass:"avatar",attrs:{src:s.photo_100}})])]),t._v(" "),a("div",{staticClass:"user__stats"},[a("b",[t._v(t._s(s.you_liked||0))]),t._v(" "),a("b",[t._v(t._s(s.liked_you||0))])])])}))],1)},staticRenderFns:[]}}},[104]);
//# sourceMappingURL=app.2c751a172ca8dd8bfb54.js.map